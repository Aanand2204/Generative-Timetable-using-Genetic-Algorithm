{% extends "layout.html" %}

{% block title %}Final Timetable - TimetableGen{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
    <h1>Final Timetable ğŸ“…</h1>
    <div>
        {% if class_name and semester %}
        <a href="{{ url_for('main.regenerate_quick') }}" class="btn-secondary"
            style="padding: 0.75rem 1.5rem; margin-right: 0.5rem; text-decoration: none; display: inline-block;">Regenerate</a>
        {% endif %}
        <button onclick="window.print()">ğŸ–¨ï¸ Print</button>
        <button class="btn-secondary" onclick="window.location.href='/modify_timetable'">Modify</button>
    </div>
</div>

<div style="overflow-x: auto;">
    <table>
        <thead>
            <tr>
                <th>Timeslot</th>
                <th>Monday</th>
                <th>Tuesday</th>
                <th>Wednesday</th>
                <th>Thursday</th>
                <th>Friday</th>
                <th>Saturday</th>
            </tr>
        </thead>
        <tbody>
            {% for entry in timeslots %}
            <tr>
                {% if entry.type == 'break' %}
                <td style="font-weight: bold; background-color: #f3f4f6;">{{ entry.time }}</td>
                <td colspan="6"
                    style="font-weight: bold; background-color: #f3f4f6; text-align: center; color: #6b7280; letter-spacing: 2px;">
                    BREAK
                </td>
                {% else %}
                <td style="font-weight: 500;">{{ entry.time }}</td>
                {% for day in ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'] %}
                <td>
                    {% if timetable.get((day, entry.time)) %}
                    <span
                        style="display: inline-block; padding: 0.25rem 0.5rem; background: #e0e7ff; color: #4338ca; border-radius: 0.25rem; font-size: 0.875rem;">{{
                        timetable[(day, entry.time)] }}</span>
                    {% else %}
                    <span style="color: #9ca3af;">â€”</span>
                    {% endif %}
                </td>
                {% endfor %}
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}